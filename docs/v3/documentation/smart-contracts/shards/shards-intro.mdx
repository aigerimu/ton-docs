# Shards

Sharding is a well-established concept that originated in  [database design](https://en.wikipedia.org/wiki/Shard_(database_architecture)). It refers to splitting a single logical dataset into multiple independent databases that don’t share resources and can run across different servers.
In simple terms, sharding enables horizontal scalability—breaking down data into smaller, manageable parts that can be processed in parallel. This technique has been crucial in the evolution from traditional data systems to [big data](https://en.wikipedia.org/wiki/Big_data).
As datasets grow beyond the capacity of conventional systems, sharding becomes the only practical way to scale effectively.

**Sharding in TON Blockchain**

TON uses sharding to handle a high volume of transactions efficiently.
The TON blockchain architecture includes one MasterChain and up to 2<sup>32</sup> WorkChains. Each WorkChain functions as an independent blockchain with its own rules. Furthermore, each WorkChain can be divided into up to 2<sup>60</sup> ShardChains or sub-shards, each responsible for a portion of the WorkChain’s state.

Currently, TON operates with only one WorkChain, known as the BaseChain.

The core principle behind sharding in TON is parallelism:
For example, if account A sends a message to account B and account C sends a message to account D, both transactions can be processed asynchronously and independently.


In the BaseChain (`workchain = 0`), the default configuration includes a single shard with the identifier `0x8000000000000000` which is `1000000000000000000000000000000000000000000000000000000000000000` in binary.
The MasterChain (`workchain = -1`) always operates with exactly one shard.

## MasterChain

The MasterChain is the main blockchain in the TON network. It stores the network configuration and the final states of all WorkChains. The MasterChain can be considered the core directory or the single source of truth for all shards and chains in the ecosystem.
It contains essential protocol-level information, including:
- The current network configuration;
- The list of active validators and their stakes;
- All active WorkChains and their corresponding ShardChains;
- The most recent block hashes of every WorkChain and ShardChain.

This data is key to maintaining consensus and ensuring all network parts are synchronized and operating securely.

## WorkChain

The MasterChain is divided into individual blockchains called WorkChains. Each WorkChain is customized for specific transaction types or use cases and operates in parallel within the TON network.

## Uniqueness

Two key architectural decisions set the TON blockchain apart from other sharded blockchains.

First, TON implements dynamic segmentation of the blockchain based on the network load. When the number of transactions reaches a critical threshold, the blockchain splits into two ShardChains. If the load on a shard continues to increase, it splits again—and this process continues recursively as needed. Conversely, when the transaction volume decreases, shards can merge back together. This adaptive sharding model enables the network to create as many shards as necessary at any given time.

Second, TON employs a non-fixed shard count. Unlike platforms such as Ethereum 2.0, which supports a fixed number of shards, e.g., 64, TON allows the number of shards to scale dynamically based on demand, with a theoretical upper limit of 2<sup>60</sup> shards per WorkChain. This virtually limitless capacity means the system could assign over 100 million shards to every person on Earth and still have resources remaining. This approach enables truly dynamic scalability — a necessity given the unpredictable nature of global network demand.


![](/img/docs/blockchain-fundamentals/scheme.png)

## Splitting

In TON Blockchain, a sequence of transactions of a single account (e.g. `Tx1 -> Tx2 -> Tx3 -> ...`) is called an account transaction chain or <b>AccountChain</b>. This emphasizes that it is a sequence of transactions associated with a single account.
Several such <b>AccountChains</b> combined within a single shard form a <b>ShardChain</b>. The <b>ShardChain</b> (hereinafter referred to as the shard) is responsible for storing and processing all transactions within a shard, where each transaction chain is defined by a specific account group.

These groups of accounts are denoted by a common binary prefix, which serves as a criterion for clustering them in the same shard.
This prefix appears in shard id which presented by a 64-bit integer and has the following structure: `<binary prefix>100000...`. For example, shard with id `1011100000...` contains all accounts started with prefix `1011`.

When number of transactions in some shard grows, this shard splits into two shards. New shards obtain the following ids: `<parent prefix>01000...` and `<parent prefix>11000...` and become responsible for accounts starting with `<parent prefix>0` and `<parent prefix>1` correspondingly. The seqnos of blocks in shards go continuously starting from the parent last seqno plus 1. After split, shards go independently and may have different seqnos.

A simple example:
![](/img/docs/blockchain-fundamentals/shardchains-split.jpg)

Masterchain block contains information about shards in its header. After the block of shard appears in masterchain header it may be considered as finished (it cannot be rolled back).

An actual example:
* Masterchain block `seqno=34607821` has 2 shards: `(0,4000000000000000,40485798)` and `(0,c000000000000000,40485843)` (https://toncenter.com/api/v2/shards?seqno=34607821).
* Shard `shard=4000000000000000` was splitted into `shard=2000000000000000` and `shard=6000000000000000`, and the masterchain block `seqno=34607822` obtains 3 shards: `(0,c000000000000000,40485844)`, `(0,2000000000000000,40485799)` and `(0,6000000000000000,40485799)`. Note that both new shards have the same seqnos but different shard IDs (https://toncenter.com/api/v2/shards?seqno=34607822).
* New shards go independently and after 100 masterchain blocks (in masterchain block `seqno=34607921`) one shard has the last block `(0,2000000000000000,40485901)` and another one has `(0,6000000000000000,40485897)` (https://toncenter.com/api/v2/shards?seqno=34607921).

## Merging
If the load on shards goes down they can merge back:
* Two shards can merge if they have a common parent and, therefore, their shard ids are `<parent prefix>010...` and `<parent prefix110...`. Merged shard will have shard id `<parent prefix>10...` (for example `10010...` + `10110...` = `1010...`). The first block of a merged shard will have `seqno=max(seqno1, seqno2) + 1`.

A simple example:
![](/img/docs/blockchain-fundamentals/shardchains-merge.jpg)

An actual example:
* In masterchain block `seqno=34626306` two of five shards with last blocks `(0,a000000000000000,40492030)` and `(0,e000000000000000,40492216)` merged into one with block `(0,c000000000000000,40492217)` (https://toncenter.com/api/v2/shards?seqno=34626306 and https://toncenter.com/api/v2/shards?seqno=34626307).

## See also

* [Infinity sharding paradigm](/v3/documentation/smart-contracts/shards/infinity-sharding-paradigm)
* [Whitepapers](/v3/documentation/whitepapers/overview)
